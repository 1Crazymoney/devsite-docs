{
  "url": "https://api.mercadopago.com",
  "paths": {
    "/external_payment": {
      "post": {
        "tags": [
          "Payment"
        ],
        "description": {
          "en": "This endopoint is used to make external Mercado Pago payments. Nowadays, it's only being used by WhatsApp.",
          "pt": "Esse endpoint é usada para realizar pagamentos externos do Mercado Pago. Atualmente, está sendo utilizada apenas pelo WhatsApp.",
          "en": "Este endpoint se utiliza para realizar pagos externos de Mercado Pago. Actualmente, solo está siendo utilizada por WhatsApp."
        },
        "parameters": [
          {
            "name": "request",
            "in": "body",
            "description": {
              "en": "request body",
              "es": "request body",
              "pt": "request body"
            },
            "schema": {
              "type": "object",
              "description": {
                "en": "This represents data from an external payment.",
                "pt": "Isso representa dados de um pagamento externo.",
                "es": "Esto representa datos de un pago externo."
              },
              "properties": {
                "distribution": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "amount": {
                        "type": "object",
                        "properties": {
                          "currency": {
                            "description": {
                              "en": "Currency of the amount.",
                              "pt": "Moeda do valor.",
                              "es": "Tipo de moneda del monto."
                            },
                            "type": "string",
                            "example": "BRL"
                          },
                          "value": {
                            "description": {
                              "en": "Value of the amount.",
                              "pt": "Valor do montante.",
                              "es": "Valor del monto."
                            },
                            "type": "integer",
                            "example": 120
                          }
                        }
                      },
                      "destination": {
                        "type": "object",
                        "properties": {
                          "account_id": {
                            "description": {
                              "en": "ID of account destination.",
                              "pt": "ID da conta de destino.",
                              "es": "ID de la cuenta de destino."
                            },
                            "type": "string",
                            "example": "PSP-MA-ID-456"
                          },
                          "type": {
                            "description": {
                              "en": "Type of destination.",
                              "pt": "Tipo de destino.",
                              "es": "Tipo de destino."
                            },
                            "type": "string",
                            "example": "MERCHANT_ACCOUNT"
                          }
                        }
                      }
                    }
                  }
                },
                "external_order_id": {
                  "description": {
                    "en": "ID Order external.",
                    "pt": "ID do pedido externo.",
                    "es": "ID de un pedido externo."
                  },
                  "type": "string",
                  "example": "FB-ORDER-ID-123"
                },
                "external_payment_id": {
                  "description": {
                    "en": "ID Payment external.",
                    "pt": "ID do pagamento externo.",
                    "es": "ID de un pago externo."
                  },
                  "type": "string",
                  "example": "FB-PAYMENT-ID-12356"
                },
                "installments": {
                  "description": {
                    "en": "Amount of fees.",
                    "pt": "Quantidade de taxas.",
                    "es": "Cantidad de tasas"
                  },
                  "type": "integer",
                  "example": 1
                },
                "payer": {
                  "type": "object",
                  "properties": {
                    "address": {
                      "type": "object",
                      "properties": {
                        "country": {
                          "description": {
                            "en": "Country of the payer.",
                            "pt": "País do pagador.",
                            "en": "País del pagador"
                          },
                          "type": "string",
                          "example": "BR"
                        },
                        "postal_code": {
                          "description": {
                            "en": "Postal code of the payer.",
                            "pt": "Codigo postal do pagador.",
                            "es": "Código postal del pagador."
                          },
                          "type": "string",
                          "example": "23080-060"
                        }
                      }
                    },
                    "device": {
                      "type": "object",
                      "properties": {
                        "device_id": {
                          "description": {
                            "en": "Device id of the device.",
                            "pt": "Device id do dispositivo.",
                            "es": "Device id del dispositivo"
                          },
                          "type": "string",
                          "example": "DEVICE-ID"
                        },
                        "ip_address": {
                          "description": {
                            "en": "Ip address of the device.",
                            "pt": "Direção IP do dispositivo.",
                            "es": "Dirección IP del dispositivo."
                          },
                          "type": "string",
                          "example": "São Paulo"
                        }
                      }
                    },
                    "full_name": {
                      "description": {
                        "en": "Full name of the payer.",
                        "pt": "Nome completo do pagador.",
                        "es": "Nombre completo del pagador."
                      },
                      "type": "string",
                      "example": "Joe Doe"
                    },
                    "phone_number": {
                      "description": {
                        "en": "Phone number of the payer.",
                        "pt": "Número de telefone do pagador.",
                        "es": "Núero de teléfono del pagador."
                      },
                      "type": "string",
                      "example": "5559800000016"
                    },
                    "registered_at": {
                      "description": {
                        "en": "ID register of the payer.",
                        "pt": "Registro do ID do pagador.",
                        "es": "Registro del ID del pagador."
                      },
                      "type": "string",
                      "example": "2022-06"
                    },
                    "tax_info": {
                      "type": "object",
                      "properties": {
                        "country": {
                          "description": {
                            "en": "Country of the tax.",
                            "pt": "País do imposto.",
                            "es": "País del impuesto."
                          },
                          "type": "string",
                          "example": "BR"
                        },
                        "type": {
                          "description": {
                            "en": "Type of tax.",
                            "pt": "Tipo de taxa.",
                            "es": "Tipo de tasa."
                          },
                          "type": "string",
                          "example": "CPF"
                        },
                        "value": {
                          "description": {
                            "en": "Value of tax.",
                            "pt": "Valor da taxa.",
                            "es": "Valor de la tasa."
                          },
                          "type": "string",
                          "example": "19459377548"
                        }
                      }
                    },
                    "type": {
                      "type": "string"
                    }
                  }
                },
                "payment_actions": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "amount": {
                        "type": "object",
                        "properties": {
                          "currency": {
                            "description": {
                              "en": "Currency of the amount.",
                              "pt": "Moeda do valor.",
                              "es": "Moneda del valor."
                            },
                            "type": "string",
                            "example": "BRL"
                          },
                          "value": {
                            "description": {
                              "en": "Value of the amount.",
                              "pt": "Valor do montante.",
                              "es": "Valor del monto."
                            },
                            "type": "integer",
                            "example": 120
                          }
                        }
                      },
                      "external_action_id": {
                        "description": {
                          "en": "ID of the action.",
                          "pt": "ID da ação.",
                          "es": "ID de la acción."
                        },
                        "type": "string",
                        "example": "FB-ACTION-ID-1234"
                      },
                      "type": {
                        "description": {
                          "en": "Type of the payment action.",
                          "pt": "Tipo de ação de pagamento.",
                          "es": "Tipo de acción de pago."
                        },
                        "type": "string",
                        "example": "SALE"
                      }
                    }
                  }
                },
                "soft_descriptor": {
                  "description": {
                    "en": "Short version of the description of the product.",
                    "pt": "Versão curta da descrição do produto.",
                    "es": "Versión corta de la descripción del producto."
                  },
                  "type": "string",
                  "example": "IG-ABCD"
                },
                "source": {
                  "type": "object",
                  "properties": {
                    "card_data": {
                      "type": "object",
                      "properties": {
                        "card_network": {
                          "description": {
                            "en": "Network of card.",
                            "pt": "Bandeira do cartão.",
                            "es": "Bandera de la tarjeta"
                          },
                          "type": "string",
                          "example": "VISA"
                        },
                        "card_type": {
                          "description": {
                            "en": "Type of card.",
                            "pt": "Tipo de cartão",
                            "es": "Tipo de tarjeta"
                          },
                          "type": "string",
                          "example": "CREDIT"
                        },
                        "cryptogram": {
                          "description": {
                            "en": "Cryptogram of the card.",
                            "pt": "Criptograma do cartão.",
                            "es": "Criptograma de la tarjeta"
                          },
                          "type": "string",
                          "example": "CRYPTOGRAM"
                        },
                        "expiry_month": {
                          "description": {
                            "en": "Expiration month of the card.",
                            "pt": "Mês de expiração do cartão.",
                            "es": "Mes de vencimiento de la tarjeta."
                          },
                          "type": "string",
                          "example": "11"
                        },
                        "expiry_year": {
                          "description": {
                            "en": "Expiry year of the card.",
                            "pt": "Ano de expiração do cartão.",
                            "es": "Año de vencimiento de la tarjeta."
                          },
                          "type": "string",
                          "example": "2035"
                        },
                        "token_number": {
                          "description": {
                            "en": "Token number of the card.",
                            "pt": "Número de token do cartão",
                            "es": "Número de token de la tarjeta"
                          },
                          "type": "string",
                          "example": "1234123412341234"
                        }
                      }
                    },
                    "type": {
                      "description": {
                        "en": "Type of payment.",
                        "pt": "Tipo de pagamento",
                        "es": "Tipo de pago"
                      },
                      "type": "string",
                      "example": "NETWORK_TOKEN"
                    }
                  }
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": {
              "en": "Ok",
              "pt": "Ok",
              "es": "Ok"
            }
          },
          "400": {
            "description": "Bad Request",
            "schema": {
              "$ref": "#/definitions/swagger.ExternalPaymentBadRequest"
            }
          },
          "401": {
            "description": "Unauthorized",
            "schema": {
              "$ref": "#/definitions/swagger.ExternalPaymentGone"
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "schema": {
              "$ref": "#/definitions/swagger.ExternalPaymentUnprocessableContent"
            }
          },
          "500": {
            "description": "Internal Server Error",
            "schema": {
              "$ref": "#/definitions/swagger.ExternalPaymentInternalServerError"
            }
          }
        }
      }
    },
    "/unified_payments": {
      "post": {
        "tags": [
          "Payment"
        ],
        "description": {
          "en": "This endpoint allows you to make a one-step-payment.",
          "pt": "Este endpoint permite que você faça um pagamento em apenas uma etapa.",
          "es": "Este enpoint te permite realizar un pago de una etapa."
        },
        "parameters": [
          {
            "name": "request",
            "in": "body",
            "description": {
              "en": "Request body that represents data from an external payment.",
              "pt": "Request body que representa dados de um pagamento externo.",
              "es": "Request body que repesenta los datos de un pago externo."
            },
            "schema": {
              "type": "object",
              "properties": {
                "card": {
                  "type": "object",
                  "properties": {
                    "bin": {
                      "description": {
                        "en": "6 or 8 first digits of PAN.",
                        "pt": "6 ou 8 primeiros dígitos do PAN",
                        "es": "6 u 8 primeros dígitos de PAN"
                      },
                      "type": "string",
                      "example": "55555555"
                    },
                    "card_number_id": {
                      "description": {
                        "en": "PAN persistence id.",
                        "pt": "ID de persistência do PAN.",
                        "es": "ID de persistencia de PAN."
                      },
                      "type": "string",
                      "example": "LSQLSQLSQLSQLSQLSQLSQLSQLSQLSQLSQLSQLSQL"
                    },
                    "card_number_length": {
                      "description": {
                        "en": "16 or 19 digits of PAN.",
                        "pt": "16 ou 19 digitos do PAN.",
                        "es": "16 o 19 dígitos de PAN."
                      },
                      "type": "integer",
                      "example": 16
                    },
                    "card_present": {
                      "description": {
                        "en": "Card present information (point).",
                        "pt": "Informação atual do cartão (point).",
                        "es": "Información presente de tarjeta (point)."
                      },
                      "type": "object",
                      "properties": {
                        "app_version": {
                          "type": "object",
                          "properties": {
                            "JSON": {
                              "type": "string",
                              "example": "This value was null."
                            }
                          }
                        },
                        "fallback_indicator": {
                          "type": "boolean",
                          "example": false
                        }
                      }
                    },
                    "cardholder": {
                      "description": {
                        "en": "cardholder information.",
                        "pt": "Informação do titular do cartão.",
                        "es": "Información del titular de la tarjeta."
                      },
                      "type": "object",
                      "properties": {
                        "name": {
                          "description": {
                            "en": "Name of the cardholder.",
                            "pt": "Nome do titular do cartão.",
                            "es": "Nombre del titular de la tarjeta"
                          },
                          "type": "string",
                          "example": "MASTERCARD"
                        }
                      }
                    },
                    "client_header": {
                      "type": "object",
                      "properties": {
                        "origin-tag": {
                          "description": {
                            "en": "Origin tag of the client.",
                            "pt": "Tag de origem do cliente.",
                            "es": "Tag de origen del cliente."
                          },
                          "type": "string",
                          "example": "unified_payments"
                        },
                        "x-forwarded-for": {
                          "description": {
                            "en": "User agent of the client.",
                            "pt": "Usuário agente do cliente.",
                            "es": "Usuario agente del cliente."
                          },
                          "type": "array",
                          "items": {
                            "type": "string"
                          },
                          "example": [
                            "99.999.999.99",
                            " 99.99.99.999",
                            " 99.999.9.999",
                            " 99.99.999.999"
                          ]
                        }
                      }
                    },
                    "client_id": {
                      "description": "Id of the client",
                      "type": "integer",
                      "example": 123
                    },
                    "device": {
                      "description": {
                        "en": "Device information sent by PX and Wallet.",
                        "pt": "Informação do dispositivo enviado pelo PX e Wallet.",
                        "es": "Información del dispositivo enviada por PX y Wallet."
                      },
                      "type": "object",
                      "properties": {
                        "fingerprint": {
                          "type": "object",
                          "properties": {
                            "model": {
                              "description": {
                                "en": "Model of the device.",
                                "pt": "Modelo do dispositivo",
                                "es": "Modelo del dispositivo"
                              },
                              "type": "string",
                              "example": "SM-A525M"
                            },
                            "os": {
                              "description": {
                                "en": "OS version of the device.",
                                "pt": "Versão do sistema operacional do dispositivo.",
                                "es": "Versión del sistema operativo del dispositivo."
                              },
                              "type": "string",
                              "example": "android"
                            },
                            "ram": {
                              "description": {
                                "en": "RAM of the device.",
                                "pt": "Memória RAM do dispositivo.",
                                "es": "Memoria RAM del dispositivo."
                              },
                              "type": "integer",
                              "example": 5761089536
                            },
                            "resolution": {
                              "description": {
                                "en": "Resolution of the device.",
                                "pt": "Resolução do dispositivo.",
                                "es": "Resolución del dispositivo."
                              },
                              "type": "string",
                              "example": "1080x2186"
                            }
                          }
                        }
                      }
                    },
                    "expiration_month": {
                      "description": {
                        "en": "Expiration month of the card.",
                        "pt": "Mês de vencimento do cartão.",
                        "es": "Mes de vencimiento de la tarjeta."
                      },
                      "type": "string",
                      "example": "07"
                    },
                    "expiration_year": {
                      "description": {
                        "en": "Expiration year of the card.",
                        "pt": "Ano de expiração do cartão.",
                        "es": "Año de vencimiento de la tarjeta."
                      },
                      "type": "string",
                      "example": "2030"
                    },
                    "first_six_digits": {
                      "description": {
                        "en": "First six digits of PAN.",
                        "pt": "Seis primeiros dígitos do PAN.",
                        "es": "Seis primeros dígitos del PAN."
                      },
                      "type": "string",
                      "example": "012345"
                    },
                    "last_four_digits": {
                      "description": {
                        "en": "Last four digits of PAN.",
                        "pt": "Últimos quatro dígitos do PAN.",
                        "es": "Últimos cuatro dígitos del PAN."
                      },
                      "type": "string",
                      "example": "6789"
                    },
                    "luhn_validation": {
                      "description": {
                        "en": "If the PAN on the card passes the luhn validation.",
                        "pt": "Se o PAN no cartão passa na validação de Luhn.",
                        "es": "Si el PAN de la tarjeta pasa la validación de Luhn."
                      },
                      "type": "boolean",
                      "example": true
                    },
                    "require_esc": {
                      "description": {
                        "en": "Whether encrypted security code flow should be used.",
                        "pt": "Se deve ser usado o fluxo de código de segurança criptografado.",
                        "es": "Si debe ser usado el flujo de código de seguridad criptografiado."
                      },
                      "type": "boolean",
                      "example": false
                    },
                    "security_code_id": {
                      "description": {
                        "en": "ID of the security code.",
                        "pt": "ID do código de segurança.",
                        "es": "ID del código de seguridad."
                      },
                      "type": "integer",
                      "example": 2882882882882883000
                    },
                    "security_code_length": {
                      "description": {
                        "en": "Length of the security code.",
                        "pt": "Comprimento do código de segurança.",
                        "es": "Longitud del código de seguridad."
                      },
                      "type": "integer",
                      "example": 3
                    },
                    "site_id": {
                      "description": {
                        "en": "ID of the site (MLA, MLB, etc).",
                        "pt": "ID do site (MLA, MLB, etc).",
                        "es": "ID del site (MLA, MLB, etc)."
                      },
                      "type": "string",
                      "example": "MLB"
                    },
                    "trunc_card_number": {
                      "description": {
                        "en": "PAN of the card truncated.",
                        "pt": "PAN truncado do cartão.",
                        "es": "Pan truncado de la tarjeta."
                      },
                      "type": "string",
                      "example": "012345XXXXXX6789"
                    }
                  }
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "string",
                  "example": "12345"
                },
                "site_id": {
                  "type": "string",
                  "example": "MLA"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "schema": {
              "type": "object",
              "properties": {
                "cause": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "code": {
                        "type": "integer",
                        "example": 2131
                      },
                      "description": {
                        "type": "string",
                        "example": "payment methods inference error"
                      }
                    }
                  }
                },
                "error": {
                  "type": "string",
                  "example": "bad_request"
                },
                "message": {
                  "type": "string",
                  "example": "Cannot infer Payment Method"
                },
                "status": {
                  "type": "integer",
                  "example": 400
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "schema": {
              "type": "object",
              "properties": {
                "cause": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "code": {
                        "type": "integer",
                        "example": 500
                      },
                      "description": {
                        "type": "string",
                        "example": "Internal error trying to payment api"
                      }
                    }
                  }
                },
                "error": {
                  "type": "string",
                  "example": "Internal error trying to POST to payment_client"
                },
                "message": {
                  "type": "string",
                  "example": "Internal error trying to POST to payment_client"
                },
                "status": {
                  "type": "integer",
                  "example": 500
                }
              }
            }
          }
        }
      }
    }
  }
}
