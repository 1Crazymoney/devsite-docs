paths:
  /checkout/preferences:
    post:
      tags:
        - $ref: '#/tags/qr-code/description'
        - $ref: '#/tags/link-de-pago/description'
      summary: 'Create a preference'
      description: 'Create a preference.'
      requestBody:
        properties:
          items:
            type: Array(Object)
            description: Items information.
            properties:
              id:
                type: String(256)
                description: Item ID.
              title:
                type: String(256)
                example: Dummy Title
                description: Item title. It will be displayed in the payment process.
              description:
                type: String(256)
                example: Dummy description
                description: Item description.
              picture_url:
                type: String(600)
                example: http://www.myapp.com/myimage.jpg
                description: Item image URL.
              category_id:
                type: String(256)
                example: cat123
                description: Item category ID.
              quantity:
                type: Integer
                example: 1
                description: Item quantity.
              currency_id:
                type: String(3)
                example: U$
                description: Currency ID. ISO_4217 code.
              unit_price:
                type: Float
                example: 10.0
                description: Unit price.
          payer:
            type: Object
            description: Buyer Information.
            properties:
              name:
                type: String(256)
                description: Buyer name.
              surname:
                type: String(256)
                description: Buyer last name.
              email:
                type: String(256)
                description: Buyer e-mail address.
              phone:
                type: Object
                description: Buyer phone.
                properties:
                  area_code:
                    type: String(256)
                    description: Area code.
                  number:
                    type: String(256)
                    description: Number.
              identification:
                type: Object
                description: Personal identification.
                properties:
                  type:
                    type: String(256)
                    description: Identification Type.
                  number:
                    type: String(256)
                    description: Number.
              address:
                type: Object
                description: Buyer address.
                properties:
                  zip_code:
                    type: String(256)
                    description: Zip code.
                  street_name:
                    type: String(256)
                    description: Street name.
                  street_number:
                    type: Integer
                    description: Street number.
              date_created:
                type: Date(ISO_8601)
                description: Registration date.
          payment_methods:
            type: Object
            description: Set up payment methods to be excluded from the payment process.
            properties:
              excluded_payment_methods:
                type: Array(Object)
                description: >-
                  Payment methods not allowed in payment process (except
                  account_money).
                properties:
                  id:
                    type: String(256)
                    description: Payment method ID.
              excluded_payment_types:
                type: Array(Object)
                description: Payment types not allowed in payment process.
                properties:
                  id:
                    type: String(256)
                    description: Payment method data_type ID.
              default_payment_method_id:
                type: String(256)
                description: Payment method to be preferred on the payments methods list.
              installments:
                type: Integer
                description: Maximum number of credit card installments to be accepted.
              default_installments:
                type: Integer
                description: Prefered number of credit card installments.
          shipments:
            type: Object
            description: Shipments information.
            properties:
              mode:
                type: String
                description: Shipment mode.
              local_pickup:
                type: Boolean
                description: >-
                  The payer have the option to pick up the shipment in your
                  store (mode:me2 only).
              dimensions:
                type: String
                description: Dimensions of the shipment in cm x cm x cm, gr (mode:me2 only)
              default_shipping_method:
                type: Integer
                description: Select default shipping method in checkout (mode:me2 only).
              free_methods:
                type: Array(Object)
                description: Offer a shipping method as free shipping (mode:me2 only).
                properties:
                  id:
                    type: Integer
                    description: Shipping method ID.
              cost:
                type: Float
                description: Shipment cost (mode:custom only).
              free_shipping:
                type: Boolean
                description: Free shipping for mode:custom.
              receiver_address:
                type: Object
                description: Shipping address.
                properties:
                  zip_code:
                    type: String(256)
                    description: Zip code.
                  street_name:
                    type: String(256)
                    description: Street name.
                  city_name:
                    type: String(256)
                    description: City name.
                  state_name:
                    type: String(256)
                    description: State name.
                  street_number:
                    type: Integer
                    description: Street number.
                  floor:
                    type: String(256)
                    description: Floor.
                  apartment:
                    type: String(256)
                    description: Apartment.
          back_urls:
            type: Object
            description: URLs to return to the sellers website.
            properties:
              success:
                type: String(600)
                description: Approved payment URL.
              pending:
                type: String(600)
                description: Pending or in process payment URL.
              failure:
                type: String(600)
                description: Canceled payment URL.
          notification_url:
            type: String(500)
            description: URL where you'd like to receive a payment notification.
          statement_descriptor:
            type: String
            description: 'How will look the payment in the card bill (e.g.: MERCADOPAGO).'
          additional_info:
            type: String(600)
            description: Additional information.
          auto_return:
            type: String
            description: >-
              If specified, your buyers will be redirected back to your site
              immediately after completing the purchase.
          external_reference:
            type: String(256)
            description: Reference you can synchronize with your payment system.
          expires:
            type: Boolean
            description: Boolean value that determines if a preference expire.
          date_of_expiration:
            type: Date(ISO_8601)
            description: Expiration date of cash payment.
          expiration_date_from:
            type: Date(ISO_8601)
            description: Date since the preference will be active.
          expiration_date_to:
            type: Date(ISO_8601)
            description: Date when the preference will be expired.
          marketplace:
            type: String(256)
            description: 'Origin of the payment. Default value: NONE'
          marketplace_fee:
            type: Float
            description: >-
              Marketplace's fee charged by application owner. Default value: 0
              in local currency
          differential_pricing:
            type: Object
            description: Differential pricing configuration for this preference.
            properties:
              id:
                type: Integer
                description: Differential pricing ID.
          tracks:
            type: Array (Object)
            description: >-
              Tracks to be executed during the users's interaction in the
              Checkout flow.
            properties:
              type:
                type: String
                description: Track type. Specifies which tool the values belong to.
              values:
                type: Map
                description: Configuration values according the track type.
      responses:
        '400':
          collector_does_not_comply_with_current_regulation:
            description: identity validation required.
          invalid_collector_id:
            description: collector_id invalid.
          invalid_sponsor_id:
            description: sponsor_id is not an active user.
          invalid_collector_email:
            description: collector is not collector_email owner
          invalid_operation_type:
            description: operation_type invalid.
          invalid_expiration_date_to:
            description: expiration_date_to invalid.
          invalid_date:
            description: invalid date of expiration.
          invalid_expiration_date_from:
            description: expiration_date_from invalid.
          invalid_items:
            description: unit_price invalid.
          invalid_back_urls:
            description: back_urls invalid. Wrong format
          invalid_payment_methods:
            description: installments invalid. Should be a number between 1 and 36.
          invalid_marketplace_fee:
            description: marketplace_fee must not be greater than total amount.
          invalid_id:
            description: preference_id not found.
          invalid_access_token:
            description: access denied
          invalid_shipments:
            description: invalid type (<type>) for field shipments.cost.
          invalid_binary_mode:
            description: binary_mode must be boolean.
